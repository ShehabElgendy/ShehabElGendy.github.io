!function(){"use strict";let e,n,o,t,i,s,r=document.getElementById("threejs-canvas"),d=!1,c={x:0,y:0};const a="images/robot_playground.glb",l=1,u={x:5,y:0,z:0},E=6,m=.005;function w(){if(!r)return void console.error("Canvas element not found");r.classList.add("draggable"),e=new THREE.Scene;const d=window.innerWidth/window.innerHeight;n=new THREE.PerspectiveCamera(60,d,.1,1e3),n.position.set(0,0,E),n.lookAt(0,0,0),o=new THREE.WebGLRenderer({canvas:r,alpha:!0,antialias:!0}),o.setSize(window.innerWidth,window.innerHeight),o.setPixelRatio(Math.min(window.devicePixelRatio,2));const c=new THREE.AmbientLight(16777215,.6);e.add(c);const m=new THREE.DirectionalLight(16777215,.8);m.position.set(5,5,5),e.add(m);const w=new THREE.DirectionalLight(55807,.4);w.position.set(-5,0,-5),e.add(w),s=new THREE.Clock,function(){const n=THREE.GLTFLoader||window.GLTFLoader;if(!n)return void console.error("GLTFLoader not found!");const o=new THREE.LoadingManager;o.onError=function(e){console.warn("Error loading resource (ignoring):",e)};const s=new n(o),r=new THREE.MeshStandardMaterial({color:13421772,roughness:.7,metalness:.3});s.load(a,function(n){t=n.scene,t.traverse(function(e){e.isMesh&&(e.material||(e.material=r.clone()),e.castShadow=!0,e.receiveShadow=!0)});const o=(new THREE.Box3).setFromObject(t).getCenter(new THREE.Vector3);t.position.x=-o.x,t.position.y=-o.y,t.position.z=-o.z,t.scale.set(l,l,l),t.position.x+=u.x,t.position.y+=u.y,t.position.z+=u.z,n.animations&&n.animations.length>0&&(i=new THREE.AnimationMixer(t),n.animations.forEach(e=>{i.clipAction(e).play()})),e.add(t),h();const s=document.getElementById("model-loader");s&&(s.classList.add("hidden"),setTimeout(()=>s.remove(),500));const d=document.querySelector(".drag-me-text");d&&d.classList.add("visible"),console.log("ðŸ¤– Robot model loaded successfully!")},function(e){if(e.total>0){const n=Math.round(e.loaded/e.total*100);n%25==0&&console.log("Model loading: "+n+"%")}},function(e){console.error("Error loading robot model:",e)})}(),window.addEventListener("resize",h,!1),window.addEventListener("scroll",f,!1),document.addEventListener("mousemove",function(e){const n=.75*window.innerWidth;e.clientX>n?(r.style.pointerEvents="auto",r.style.cursor="grab"):(r.style.pointerEvents="none",r.style.cursor="default")},!1),r.addEventListener("mousedown",g,!1),document.addEventListener("mousemove",v,!1),document.addEventListener("mouseup",L,!1),r.addEventListener("touchstart",T,!1),document.addEventListener("touchmove",p,{passive:!1}),document.addEventListener("touchend",x,!1),R()}function f(){}function h(){if(n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix(),o.setSize(window.innerWidth,window.innerHeight),o.setPixelRatio(Math.min(window.devicePixelRatio,2)),t){const e=l;window.innerWidth<768?(t.position.x=u.x-1.5,t.scale.set(.6*e,.6*e,.6*e)):window.innerWidth<1200?(t.position.x=u.x-1,t.scale.set(.8*e,.8*e,.8*e)):(t.position.x=u.x,t.scale.set(e,e,e))}}function g(e){r.requestPointerLock&&r.requestPointerLock(),d=!0,c={x:e.clientX,y:e.clientY}}function v(e){if(!d||!t)return;const n=void 0!==e.movementX?e.movementX:e.clientX-c.x,o=void 0!==e.movementY?e.movementY:e.clientY-c.y,i=new THREE.Vector3(-o,n,0).normalize(),s=.005*Math.sqrt(n*n+o*o);if(s>0){const e=new THREE.Quaternion;e.setFromAxisAngle(i,s),t.quaternion.premultiply(e)}c={x:e.clientX,y:e.clientY}}function L(){d=!1,document.exitPointerLock&&document.exitPointerLock()}function T(e){1===e.touches.length&&(d=!0,c={x:e.touches[0].clientX,y:e.touches[0].clientY})}function p(e){if(!d||!t||1!==e.touches.length)return;e.preventDefault();const n=e.touches[0].clientX-c.x,o=e.touches[0].clientY-c.y,i=new THREE.Vector3(-o,n,0).normalize(),s=.005*Math.sqrt(n*n+o*o);if(s>0&&t){const e=new THREE.Quaternion;e.setFromAxisAngle(i,s),t.quaternion.premultiply(e)}c={x:e.touches[0].clientX,y:e.touches[0].clientY}}function x(){d=!1}function R(){requestAnimationFrame(R);const r=s.getDelta();if(i&&i.update(r),t&&!d){const e=new THREE.Quaternion;e.setFromAxisAngle(new THREE.Vector3(0,1,0),m),t.quaternion.multiply(e)}o.render(e,n)}let y=0;!function e(){return y++,"undefined"==typeof THREE?(1===y&&console.log("Waiting for THREE.js to load..."),y>100?void console.error("THREE.js failed to load after 5 seconds. Check your internet connection."):void setTimeout(e,50)):THREE.GLTFLoader||"undefined"!=typeof GLTFLoader?(console.log("THREE.js and GLTFLoader loaded successfully!"),void("loading"===document.readyState?document.addEventListener("DOMContentLoaded",w):w())):(1===y&&console.log("THREE.js loaded, waiting for GLTFLoader..."),y>100?void console.error("GLTFLoader failed to load after 5 seconds."):void setTimeout(e,50))}()}();